<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{TITLE}}</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <style>
        /* 1. RESET & BASE */
        * { box-sizing: border-box; }
        
        /* 2. PAPER DEFINITION (The Browser Hint) */
        @page {
            size: A4 portrait;
            margin: 0; /* CRITICAL: We handle margins inside the body to prevent overriding */
        }

        body {
            margin: 0;
            padding: 0;
            background: #f0f0f0; /* Gray background for screen preview */
            font-family: 'Roboto', -apple-system, sans-serif;
            color: #202124;
            line-height: 1.5;
            -webkit-print-color-adjust: exact;
        }

        /* 3. THE PAGE CONTAINER (The Forced Margin) */
        .print-container {
            /* A4 Dimensions */
            width: 210mm; 
            min-height: 297mm;
            
            /* The REAL Margins (25mm = ~1 inch) */
            padding: 25mm 25mm 25mm 25mm; 
            
            /* Center on screen */
            margin: 20px auto; 
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* 4. HEADER */
        .doc-header {
            border-bottom: 2px solid #dadce0;
            padding-bottom: 12px;
            margin-bottom: 24px;
        }
        h1.title { 
            font-size: 22pt; 
            margin: 0 0 8px 0; 
            color: #000; 
            line-height: 1.2;
        }
        .meta { 
            font-size: 10pt; 
            color: #5f6368; 
        }

        /* 5. CONTENT STYLES */
        .cell {
            margin-bottom: 24px;
            break-inside: avoid; /* Keeps cell together */
        }

        /* Markdown */
        .markdown p { margin-bottom: 12px; text-align: justify; }
        .markdown h1 { font-size: 18pt; margin-top: 24px; color: #000; border-bottom: 1px solid #eee; padding-bottom: 4px; }
        .markdown h2 { font-size: 14pt; margin-top: 20px; color: #000; }
        .markdown img { 
            max-width: 100%; 
            display: block; 
            margin: 12px auto; 
            border: 1px solid #eee; 
            border-radius: 4px;
        }

        /* Code Blocks */
        .code-container {
            border: 1px solid #dadce0;
            border-radius: 6px;
            overflow: hidden;
            background: #fff;
        }

        .code-source {
            background: #f8f9fa;
            color: #37474f;
            font-family: 'JetBrains Mono', monospace;
            font-size: 9pt;
            padding: 12px 16px;
            white-space: pre-wrap;
            border-bottom: 1px solid #dadce0;
        }

        /* Outputs */
        .outputs {
            padding: 12px 16px;
            background: #fff;
        }

        /* Hide border if no output */
        .code-container:not(:has(.outputs)) .code-source {
            border-bottom: none;
        }

        .output-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 9pt;
            color: #3c4043;
            white-space: pre-wrap;
            margin: 0;
        }

        .output-image {
            margin-top: 12px;
            display: flex;
            justify-content: center;
        }
        .output-image img {
            max-width: 100%;
            border: 1px solid #f1f3f4;
        }

        /* 6. PRINT OVERRIDES (The Nuclear Option) */
        @media print {
            body {
                background: white;
            }
            .print-container {
                width: 100%;
                margin: 0;
                box-shadow: none;
                /* Crucial: Maintain the padding even when printing */
                padding: 25mm !important; 
            }
            .doc-header { break-after: avoid; }
            a[href]:after { content: none !important; }
        }
    </style>
</head>
<body>
    <div class="print-container">
        <header class="doc-header">
            <h1 class="title">{{TITLE}}</h1>
            <div class="meta">Generated: {{DATE}}</div>
        </header>
        <main>
            {{CONTENT}}
        </main>
    </div>
</body>
</html>